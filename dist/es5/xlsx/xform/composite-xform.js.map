{"version":3,"file":"composite-xform.js","names":["BaseXform","require","CompositeXform","node","parser","map","name","parseOpen","tag","model","createNewModel","text","parseText","parseClose","onParserClose","undefined","module","exports"],"sources":["../../../../lib/xlsx/xform/composite-xform.js"],"sourcesContent":["const BaseXform = require('./base-xform');\n\n/* 'virtual' methods used as a form of documentation */\n/* eslint-disable class-methods-use-this */\n\n// base class for xforms that are composed of other xforms\n// offers some default implementations\nclass CompositeXform extends BaseXform {\n  createNewModel(node) {\n    return {};\n  }\n\n  parseOpen(node) {\n    // Typical pattern for composite xform\n    this.parser = this.parser || this.map[node.name];\n    if (this.parser) {\n      this.parser.parseOpen(node);\n      return true;\n    }\n\n    if (node.name === this.tag) {\n      this.model = this.createNewModel(node);\n      return true;\n    }\n\n    return false;\n  }\n\n  parseText(text) {\n    // Default implementation. Send text to child parser\n    if (this.parser) {\n      this.parser.parseText(text);\n    }\n  }\n\n  onParserClose(name, parser) {\n    // parseClose has seen a child parser close\n    // now need to incorporate into this.model somehow\n    this.model[name] = parser.model;\n  }\n\n  parseClose(name) {\n    // Default implementation\n    if (this.parser) {\n      if (!this.parser.parseClose(name)) {\n        this.onParserClose(name, this.parser);\n        this.parser = undefined;\n      }\n      return true;\n    }\n\n    return name !== this.tag;\n  }\n}\n\nmodule.exports = CompositeXform;\n"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,cAAc,CAAC;;AAEzC;AACA;;AAEA;AACA;AAAA,IACMC,cAAc;EAAA;EAAA;EAAA;IAAA;IAAA;EAAA;EAAA;IAAA;IAAA,OAClB,wBAAeC,IAAI,EAAE;MACnB,OAAO,CAAC,CAAC;IACX;EAAC;IAAA;IAAA,OAED,mBAAUA,IAAI,EAAE;MACd;MACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAACA,MAAM,IAAI,IAAI,CAACC,GAAG,CAACF,IAAI,CAACG,IAAI,CAAC;MAChD,IAAI,IAAI,CAACF,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACG,SAAS,CAACJ,IAAI,CAAC;QAC3B,OAAO,IAAI;MACb;MAEA,IAAIA,IAAI,CAACG,IAAI,KAAK,IAAI,CAACE,GAAG,EAAE;QAC1B,IAAI,CAACC,KAAK,GAAG,IAAI,CAACC,cAAc,CAACP,IAAI,CAAC;QACtC,OAAO,IAAI;MACb;MAEA,OAAO,KAAK;IACd;EAAC;IAAA;IAAA,OAED,mBAAUQ,IAAI,EAAE;MACd;MACA,IAAI,IAAI,CAACP,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAACQ,SAAS,CAACD,IAAI,CAAC;MAC7B;IACF;EAAC;IAAA;IAAA,OAED,uBAAcL,IAAI,EAAEF,MAAM,EAAE;MAC1B;MACA;MACA,IAAI,CAACK,KAAK,CAACH,IAAI,CAAC,GAAGF,MAAM,CAACK,KAAK;IACjC;EAAC;IAAA;IAAA,OAED,oBAAWH,IAAI,EAAE;MACf;MACA,IAAI,IAAI,CAACF,MAAM,EAAE;QACf,IAAI,CAAC,IAAI,CAACA,MAAM,CAACS,UAAU,CAACP,IAAI,CAAC,EAAE;UACjC,IAAI,CAACQ,aAAa,CAACR,IAAI,EAAE,IAAI,CAACF,MAAM,CAAC;UACrC,IAAI,CAACA,MAAM,GAAGW,SAAS;QACzB;QACA,OAAO,IAAI;MACb;MAEA,OAAOT,IAAI,KAAK,IAAI,CAACE,GAAG;IAC1B;EAAC;EAAA;AAAA,EA7C0BR,SAAS;AAgDtCgB,MAAM,CAACC,OAAO,GAAGf,cAAc"}